<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenClaw Agent Dashboard - Owner Control</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Pusher for Real-time -->
    <script src="https://js.pusher.com/8.2.0/pusher.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <i class="fas fa-network-wired"></i>
                <span>OpenClaw</span>
                <span class="owner-indicator" title="Ferry - Owner">üëë</span>
            </div>
            
            <nav class="nav-menu">
                <a href="#" class="nav-item active" data-view="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-view="chat">
                    <i class="fas fa-comments"></i>
                    <span>Agent Chat</span>
                    <span class="badge" id="chat-badge">0</span>
                </a>
                <a href="#" class="nav-item" data-view="agents">
                    <i class="fas fa-robot"></i>
                    <span>Agents</span>
                </a>
                <a href="#" class="nav-item" data-view="activity">
                    <i class="fas fa-history"></i>
                    <span>Activity Log</span>
                </a>
            </nav>
            
            <!-- Owner Call Section -->
            <div class="sidebar-section owner-section">
                <h4><i class="fas fa-crown"></i> Owner Control</h4>
                <button class="btn btn-owner" id="owner-call-btn">
                    <i class="fas fa-phone-alt"></i> Call Agent
                </button>
            </div>
            
            <div class="sidebar-footer">
                <div class="connection-status">
                    <span class="status-dot" id="conn-status"></span>
                    <span id="conn-text">Connecting...</span>
                </div>
                <div class="owner-status">
                    <span class="owner-badge-sidebar">üëë Ferry - Owner</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h1 id="page-title">Dashboard</h1>
                <div class="header-actions">
                    <button class="btn btn-secondary" id="refresh-btn">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <div class="agent-selector">
                        <select id="current-agent">
                            <option value="">Select Agent...</option>
                            <option value="yuri">üë®‚ÄçüöÄ Yuri</option>
                            <option value="jarvis">ü§ñ Jarvis</option>
                            <option value="friday">üë©‚Äçüíº Friday</option>
                            <option value="glass">üîç Glass</option>
                            <option value="epstein">üß† Epstein</option>
                        </select>
                    </div>
                </div>
            </header>

            <!-- Dashboard View -->
            <div class="view" id="dashboard-view">
                <div class="owner-welcome-banner">
                    <div class="owner-avatar-large">üë§</div>
                    <div class="owner-welcome-text">
                        <h2>Welcome back, Ferry! üëë</h2>
                        <p>You are the <strong>Owner</strong> of all agents. You can call any agent directly, manage their tasks, and monitor all activities in real-time.</p>
                    </div>
                    <div class="owner-quick-actions">
                        <button class="btn btn-primary" onclick="window.dashboard.toggleOwnerCallModal()">
                            <i class="fas fa-phone-alt"></i> Call Agent Now
                        </button>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon online">
                            <i class="fas fa-circle"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="stat-online">0</span>
                            <span class="stat-label">Agents Online</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon busy">
                            <i class="fas fa-spinner"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="stat-busy">0</span>
                            <span class="stat-label">Working</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon messages">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="stat-messages">0</span>
                            <span class="stat-label">Total Messages</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon activities">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="stat-activities">0</span>
                            <span class="stat-label">Activities</span>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="panel">
                        <div class="panel-header">
                            <h3><i class="fas fa-robot"></i> Agent Status</h3>
                        </div>
                        <div class="panel-body">
                            <div class="agent-grid" id="agent-status-grid">
                                <!-- Agent cards will be inserted here -->
                            </div>
                        </div>
                    </div>

                    <div class="panel">
                        <div class="panel-header">
                            <h3><i class="fas fa-history"></i> Recent Activity</h3>
                        </div>
                        <div class="panel-body">
                            <div class="activity-list" id="activity-list">
                                <!-- Activities will be inserted here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat View -->
            <div class="view hidden" id="chat-view">
                <div class="chat-container">
                    <div class="chat-sidebar">
                        <div class="chat-rooms">
                            <div class="room-item active" data-room="general">
                                <i class="fas fa-hashtag"></i>
                                <span>general</span>
                            </div>
                            <div class="room-item" data-room="commands">
                                <i class="fas fa-terminal"></i>
                                <span>commands</span>
                            </div>
                            <div class="room-item" data-room="alerts">
                                <i class="fas fa-bell"></i>
                                <span>alerts</span>
                            </div>
                        </div>
                        <div class="direct-messages">
                            <h4>Direct Messages</h4>
                            <div id="dm-list">
                                <!-- DM items will be inserted here -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="chat-main">
                        <div class="chat-header">
                            <h3 id="chat-room-name">#general</h3>
                            <span class="typing-indicator" id="typing-indicator"></span>
                        </div>
                        
                        <div class="chat-messages" id="chat-messages">
                            <!-- Messages will be inserted here -->
                        </div>
                        
                        <div class="chat-input-area">
                            <div class="chat-toolbar">
                                <button class="toolbar-btn" title="Bold"><i class="fas fa-bold"></i></button>
                                <button class="toolbar-btn" title="Italic"><i class="fas fa-italic"></i></button>
                                <button class="toolbar-btn" title="Code"><i class="fas fa-code"></i></button>
                                <button class="toolbar-btn agent-cmd-btn" title="Call Agent" id="agent-cmd-btn">
                                    <i class="fas fa-robot"></i> Call Agent
                                </button>
                                <div class="agent-cmd-dropdown" id="agent-cmd-dropdown" style="display: none;">
                                    <div class="agent-cmd-item" data-agent="jarvis">
                                        <span class="agent-cmd-avatar">ü§ñ</span>
                                        <span class="agent-cmd-name">/jarvis</span>
                                    </div>
                                    <div class="agent-cmd-item" data-agent="friday">
                                        <span class="agent-cmd-avatar">üë©‚Äçüíº</span>
                                        <span class="agent-cmd-name">/friday</span>
                                    </div>
                                    <div class="agent-cmd-item" data-agent="glass">
                                        <span class="agent-cmd-avatar">üîç</span>
                                        <span class="agent-cmd-name">/glass</span>
                                    </div>
                                    <div class="agent-cmd-item" data-agent="epstein">
                                        <span class="agent-cmd-avatar">üß†</span>
                                        <span class="agent-cmd-name">/epstein</span>
                                    </div>
                                    <div class="agent-cmd-item" data-agent="yuri">
                                        <span class="agent-cmd-avatar">üë®‚ÄçüöÄ</span>
                                        <span class="agent-cmd-name">/yuri</span>
                                    </div>
                                </div>
                            </div>
                            <div class="input-wrapper">
                                <input type="text" id="message-input" placeholder="Type /agentname to call an agent (e.g., /jarvis hello)" autocomplete="off">
                                <button class="send-btn" id="send-btn">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agents View -->
            <div class="view hidden" id="agents-view">
                <div class="panel owner-panel">
                    <div class="panel-header">
                        <h3><i class="fas fa-users-cog"></i> Agent Management</h3>
                        <span class="owner-tag-header">üëë Owner Access</span>
                    </div>
                    <div class="panel-body">
                        <div class="agents-list" id="agents-list">
                            <!-- Agent details will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Activity View -->
            <div class="view hidden" id="activity-view">
                <div class="panel">
                    <div class="panel-header">
                        <h3><i class="fas fa-list"></i> Full Activity Log</h3>
                    </div>
                    <div class="panel-body">
                        <div class="activity-list full" id="full-activity-list">
                            <!-- Full activity list will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <h2>Select Your Agent</h2>
            <p>Choose which agent you want to interact as:</p>
            <div class="agent-login-grid">
                <button class="agent-login-btn" data-agent="yuri">
                    <span class="agent-avatar">üë®‚ÄçüöÄ</span>
                    <span class="agent-name">Yuri</span>
                </button>
                <button class="agent-login-btn" data-agent="jarvis">
                    <span class="agent-avatar">ü§ñ</span>
                    <span class="agent-name">Jarvis</span>
                </button>
                <button class="agent-login-btn" data-agent="friday">
                    <span class="agent-avatar">üë©‚Äçüíº</span>
                    <span class="agent-name">Friday</span>
                </button>
                <button class="agent-login-btn" data-agent="glass">
                    <span class="agent-avatar">üîç</span>
                    <span class="agent-name">Glass</span>
                </button>
                <button class="agent-login-btn" data-agent="epstein">
                    <span class="agent-avatar">üß†</span>
                    <span class="agent-name">Epstein</span>
                </button>
            </div>
            <button class="btn btn-secondary" id="observer-mode">Observer Mode</button>
        </div>
    </div>

    <!-- Owner Call Agent Modal -->
    <div class="modal hidden" id="owner-call-modal">
        <div class="modal-content owner-call-content">
            <div class="modal-header">
                <h2><i class="fas fa-crown"></i> Owner Call Agent</h2>
                <button class="modal-close" id="close-owner-call">&times;</button>
            </div>
            <p class="modal-desc">As the Owner, you can call any agent directly and give them commands.</p>
            
            <div class="owner-call-agents">
                <h4>Select Agent:</h4>
                <div class="owner-call-agent-grid">
                    <button class="owner-call-agent-btn" data-agent="jarvis">
                        <span class="agent-avatar">ü§ñ</span>
                        <span class="agent-name">Jarvis</span>
                    </button>
                    <button class="owner-call-agent-btn" data-agent="friday">
                        <span class="agent-avatar">üë©‚Äçüíº</span>
                        <span class="agent-name">Friday</span>
                    </button>
                    <button class="owner-call-agent-btn" data-agent="glass">
                        <span class="agent-avatar">üîç</span>
                        <span class="agent-name">Glass</span>
                    </button>
                    <button class="owner-call-agent-btn" data-agent="epstein">
                        <span class="agent-avatar">üß†</span>
                        <span class="agent-name">Epstein</span>
                    </button>
                    <button class="owner-call-agent-btn" data-agent="yuri">
                        <span class="agent-avatar">üë®‚ÄçüöÄ</span>
                        <span class="agent-name">Yuri</span>
                    </button>
                </div>
            </div>
            
            <div class="owner-call-input-area">
                <input type="hidden" id="owner-call-target" value="">
                <label for="owner-call-input">Command:</label>
                <input type="text" id="owner-call-input" placeholder="Enter your command to the agent..." autocomplete="off">
                <button class="btn btn-primary btn-full" id="send-owner-call">
                    <i class="fas fa-phone-alt"></i> Call Agent
                </button>
            </div>
        </div>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>
